# vim和vi
> vim可以理解为vi的进阶版，vim是一个程序开发工具而不仅仅是一个程序开发工具

## vi的使用

### 三种模式：
- *一般指令模式(**command mode**)*:
    - (默认的模式)，可以上下左右移动光标。
    - 可以**删除字符/整列**或者**复制以及粘贴文件数据**。
    - **不能编辑**文件内容。

- *编辑模式(**insert mode**)*：
    - 左上角出现**INSERT或者REPLACE**表明进入编辑模式。
    - **可以编辑**文件内容。
- *命令行命令模式(**command-line mode**)*：
    - 光标移动到**最下面那一列**表示进入命令行命令模式。
    - 可以搜索数据，读取、存大量取代字符、离开vi等动作。

**模型图：**

![0](/img/11Chapter/Capture.PNG)


### 进入vi方式：
```Shell
[ray@CentOSTest tmp]$ vi ./testfile
```
*output：*
新文件会显示**new file**，保存后就会创建此文件

![0](/img/11Chapter/Capture1.PNG)

> 已存在的文件会显示**行数和字符数**

![0](/img/11Chapter/Capture2.PNG)

### vi中一些常见按键：
1. 如何进入**编辑模式**：
按下 **"i, o, a"** 就可以进入编辑模式，左下角会出现-- INSERT --，按 **"esc"** 可以退出编辑模式回到一般指令模式
2. 如何**退出vi**：
回到一般指令模式，输入 **:wq** 保存并退出，或者输入 **:q!** 不保存退出。
> 但是如果你的文件没有**w**的权限，则可以使用 **:wq!** 强行保存，但前提是文件是可以改变权限的
3. 其他：
- _**光标在列之间移动**_：

    向左: **h**

    向右：**l**

    向下：**j**

    向上：**k**

    上下左右的按键也可以实现移动光标，但是hjkl可以批量移动，比如输入30j就是往下移动30次光标

    |**H**|光标移动到这个屏幕的**最上方那一列的第一个字符**

    |**M**|光标移动到这个屏幕的**中央那一列的第一个字符**

    |**L**|光标移动到这个屏幕的**最下方那一列的第一个字符**

    |**G**|移动到这个**文件的最后一列**（常用）

    |**nG**|n 为数字。**移动到这个文件的第 n 列**。例如 20G 则会移动到这个文件的第 20 列（可配合 :set nu）

    |**gg**|移动到这个文件的第一列，**相当于 1G** 啊！ （常用）

    |n<Enter>|n 为数字。光标**向下移动 n 列并且光标回到开头**（常用）

    |**+**|光标移动到**下一列**(等同于enter)

    |**-**|光标移动到**上一列**
---
- **_翻页_**：

    向下移动一页：[ctrl] + [f],相当于[Page Down]

    向上移动一页：[ctrl] + [b]相当于[Page Up]

    向下移动半页：[ctrl] + [d]

    向上移动半页：[ctrl] + [u]
---
- **_光标左右移动：_**

    |**n + [space]**|那个 n 表示“数字”，例如 20 。按下数字后再按空白键，光标会**向右移动这一列的 n 个字符**。例如 20 + [space] 则光标会向后面移动 20 个字符距离。

    |**0 或功能键[Home]**|这是数字“ 0 ”：移动到这**一列的最前面字符处** （常用）

    |**\$ 或功能键[End]**|移动到这**一列的最后面字符处**（常用）
---
- **_搜寻与取代_**：

    |**/word**|向光标之**下寻找一个名称为 word** 的字串。例如要在文件内搜寻 vbird 这个字串，就输入 /vbird 即可！ （常用）

    |**?word**|向光标之**上寻找一个字串名称为 word** 的字串。

    |**n**|这个 n 是英文按键。代表“<u>重复前一个搜寻的动作</u>”。举例来说， 如果刚刚我们执行 /vbird 去向下搜寻 vbird 这个字串，则按下 n 后，会向下继续搜寻下一个名称为 vbird 的字串。如果是执行 ?vbird 的话，那么按下 n 则会向上继续搜寻名称为 vbird 的字串！

    |**N**|这个 N 是英文按键。与 n 刚好相反，为 **“反向”进行前一个搜寻动作**。 例如 /vbird 后，按下 N 则表示“向上”搜寻 vbird 。

    |使用 **/word 配合 n 及 N** 是非常有帮助的！可以让你重复的找到一些你搜寻的关键字！

    |**:n1,n2s/word1/word2/g**|n1 与 n2 为数字。在第 **n1 与 n2 列之间寻找 word1** 这个字串，**并将该字串取代为 word2** ！举例来说，在 100 到 200 列之间搜寻 vbird 并取代为 VBIRD 则：“:100,200s/vbird/VBIRD/g”。（常用）

    |**:1,\$s/word1/word2/g**|从**第一列到最后一列**寻找 word1 字串，并将该字串**取代**为 word2 ！（常用）

    |**:1,\$s/word1/word2/gc**|从**第一列到最后一列**寻找 word1 字串，并将该字串**取代**为 word2 ！且在取代前显示提示字符给使用者确认 **（confirm）** 是否需要取代！（常用）
---
- **_删除_**：
    |**x, X**|在一列字当中，x 为向**光标后删除**一个字符 （相当于 [del] 按键）， X 为向**光标前删除**一个字符（相当于 [backspace] 亦即是倒退键） （常用）

    |**nx**|n 为数字，**连续向后删除 n 个字符**。举例来说，我要连续删除 10 个字符， “10x”。

    |**dd**|**删除**光标所在的那**一整列**（常用）

    |**ndd**|n 为数字。**删除光标所在的向下 n 列**，例如 20dd 则是删除 20 列 （常用）

    |**d1G**|**删除**光标**所在到第一列的所有数据**

    |**dG**|**删除**光标**所在到最后一列的所有数据**

    |**d\$**|**删除**光标所在处，**到**该列的**最后一个字符**

    |**d0**|那个是数字的 0 ，**删除**光标所在处，**到**该列的**最前面一个字符**
---
- **_复制与贴上_**：

    |**yy**|**复制**光标**所在的那一列**（常用）

    |**nyy**|n 为数字。**复制**光标**所在的向下 n 列**，例如 20yy 则是复制 20 列（常用）

    |**y1G**|**复制**光标**所在列到第一列**的所有数据

    |**yG**|**复制**光标**所在列到最后一列**的所有数据

    |**y0**|**复制**光标所在的那个**字符到该列行首**的所有数据

    |**y$**|**复制**光标所在的那个**字符到该列行尾**的所有数据

    |**p, P**|**p** 为将已复制的数据在光标**下一列贴上**，**P** 则为**贴在光标上一列**！ 举例来说，我目前光标在第 20 列，且已经复制了 10 列数据。则按下 p 后， 那 10 列数据会贴在原本的 20 列之后，亦即由 21 列开始贴。但如果是按下 P 呢？ 那么原本的第 20 列会被推到变成 30 列。 （常用）
---
- **_其他常用_**：

    |**J**|将光标**所在列与下一列的数据结合成同一列**

    |**c**|重复删除多个数据，例如向**下删除 10 列**，[ **10cj** ]

    |**u**|**撤回前一个动作**。（常用）

    |**[Ctrl]+r**|**恢复被u撤回的动作**。（常用）

    |这个 u 与 [Ctrl]+r 是很常用的指令！一个是复原，另一个则是重做一次～ 利用这两个功能按键，你的编辑，嘿嘿！很快乐的啦！

    |**.**|不要怀疑！这就是小数点！意思是**重复前一个动作的意思**。 如果你想要重复删除、重复贴上等等动作，按下小数点“.”就好了！ （常用）
